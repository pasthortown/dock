(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{HaiW:function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),u=function(){return function(){}}(),i=t("pMnS"),o=t("Ip0R"),r=function(){function l(l,n){void 0===l&&(l=""),this.symbol=l,void 0===n?this.getPiece(l):this.getPiece(l,n),this.border_css=""}return l.prototype.getPiece=function(l,n){var t="",e="";""!==l?(e=l.toUpperCase()==l?"white":"black",void 0!==n&&(e=n),t={r:"rook",n:"knight",b:"bishop",q:"queen",k:"king",p:"pawn"}[l.toLowerCase()],this.set(t,e)):(this.name="",this.color="",this.image="")},l.prototype.get_max_count=function(){return this.max_count},l.prototype.get_symbol=function(){var l={rook:"r",knight:"n",bishop:"b",queen:"q",king:"k",pawn:"p","":"empty"}[this.name];return"white"==this.color?l.toUpperCase():l},l.prototype.get_color=function(){return this.color},l.prototype.set=function(l,n){this.name=l,this.color=n,this.max_count={rook:10,knight:10,bishop:10,queen:9,king:1,pawn:8}[this.name],this.numerical_value={rook:5,knight:3,bishop:3,queen:9,king:1e3,pawn:1}[this.name],this.refresh()},l.prototype.setColor=function(l){this.color=l,this.refresh()},l.prototype.refresh=function(){""!==this.name?("selected"==this.color&&(this.image="selected white"+this.name),"shadow"==this.color&&(this.image="shadow white"+this.name),"capture"==this.color&&(this.image="capture white"+this.name),"check"==this.color&&(this.image="check white"+this.name),"disabled"==this.color&&(this.image="disabled white"+this.name),"black"!==this.color&&"white"!==this.color||(this.image=this.color+this.name)):this.image=""},l}(),s=function(){function l(l,n){this.position=[],this.game_time=0,this.captured_by_white=[],this.captured_by_black=[],this.white_side=!0,this.piecesPromote=[new r("r"),new r("n"),new r("b"),new r("q")],this.buildingPieces=[[new r("r","white"),new r("n","white"),new r("b","white"),new r("q","white"),new r("k","white"),new r("p","white")],[new r("r","black"),new r("n","black"),new r("b","black"),new r("q","black"),new r("k","black"),new r("p","black")]],this.newPosition(l),this.game_time=void 0===n?300:60*n}return l.prototype.rotate_board=function(){this.white_side=!this.white_side,this.drawBoard()},l.prototype.newPosition=function(l){this.position=[];for(var n=l.split("/"),t=0;t<n.length;t++){for(var e=[],u=0;u<n[t].length;u++){var i=n[t][u];if(this.is_numeric(i))for(var o=0;o<parseInt(i);o++)e.push("");else e.push(i)}this.position.push(e)}this.drawBoard()},l.prototype.is_numeric=function(l){return/^\d+$/.test(l)},l.prototype.get_fen=function(){var l="";return this.position.forEach(function(n){var t=0;n.forEach(function(n){""==n?t++:(t>0&&(l+=t.toString(),t=0),l+=n)}),t>0&&(l+=t.toString()),l+="/"}),l.substring(0,l.length-1)},l.prototype.drawBoard=function(){var l=this;this.pieces=[],this.captured_by_black=[],this.captured_by_white=[];for(var n={r:2,n:2,b:2,q:1,p:8,R:2,N:2,B:2,Q:1,P:8,K:1,k:1},t={r:0,n:0,b:0,q:0,p:0,R:0,N:0,B:0,Q:0,P:0,K:0,k:0},e=0;e<8;e++){for(var u=[],i=0;i<8;i++){var o=new r;o=new r(this.white_side?this.position[e][i]:this.position[7-e][7-i]),t[this.position[e][i]]=t[this.position[e][i]]+1,u.push(o)}this.pieces.push(u)}["r","n","b","q","p"].forEach(function(e){for(var u=0;u<n[e]-t[e]&&n[e]-t[e]>0;u++)l.captured_by_white.push(new r(e,"black"));var i=e.toUpperCase();for(u=0;u<n[i]-t[i]&&n[i]-t[i]>0;u++)l.captured_by_black.push(new r(i,"white"))})},l.prototype.unselectBuildingPiece=function(){this.buildingPieces[0].forEach(function(l){l.setColor("white")}),this.buildingPieces[1].forEach(function(l){l.setColor("black")})},l.prototype.selectPiece=function(l,n){this.pieces[l][n].select()},l.prototype.disableMaxCounts=function(){var l=this;this.unselectBuildingPiece(),this.buildingPieces.forEach(function(n){n.forEach(function(n){var t=n.get_symbol(),e=n.get_max_count(),u=0;l.position.forEach(function(l){l.forEach(function(l){l==t&&u++})}),u==e&&n.setColor("disabled")})})},l.prototype.selectAddingPiece=function(l,n){if(this.unselectBuildingPiece(),this.disableMaxCounts(),"disabled"==this.buildingPieces[l][n].get_color())return new r("");var t=new r(this.buildingPieces[l][n].get_symbol(),this.buildingPieces[l][n].get_color());return this.buildingPieces[l][n].setColor("selected"),t},l.prototype.check=function(l){this.pieces.forEach(function(n){n.forEach(function(n){"king"==n.name&&n.color==l&&n.set("king","check")})})},l.prototype.drawPossibleMoves=function(l,n){var t=this;this.drawBoard();var e={a:"0",b:"1",c:"2",d:"3",e:"4",f:"5",g:"6",h:"7"},u={8:"0",7:"1",6:"2",5:"3",4:"4",3:"5",2:"6",1:"7"};this.white_side||(e={a:"7",b:"6",c:"5",d:"4",e:"3",f:"2",g:"1",h:"0"},u={8:"7",7:"6",6:"5",5:"4",4:"3",3:"2",2:"1",1:"0"}),l.forEach(function(l){var i=e[l.from.substr(0,1)],o=u[l.from.substr(1,1)],s=e[l.to.substr(0,1)],a=u[l.to.substr(1,1)];t.pieces[o][i]=new r(n,"selected"),t.pieces[a][s]=void 0===l.captured?new r(n,"shadow"):new r(l.captured,"capture")})},l.prototype.show_last_move=function(l){if(void 0!==l.from&&""!=l.from&&void 0!==l.to&&""!=l.to){var n={a:"0",b:"1",c:"2",d:"3",e:"4",f:"5",g:"6",h:"7"},t={8:"0",7:"1",6:"2",5:"3",4:"4",3:"5",2:"6",1:"7"};this.white_side||(n={a:"7",b:"6",c:"5",d:"4",e:"3",f:"2",g:"1",h:"0"},t={8:"7",7:"6",6:"5",5:"4",4:"3",3:"2",2:"1",1:"0"});var e=n[l.from.substr(0,1)],u=t[l.from.substr(1,1)],i=n[l.to.substr(0,1)],o=t[l.to.substr(1,1)];this.pieces[u][e].border_css="space-from",this.pieces[o][i].border_css="space-to"}},l.prototype.get_piece=function(l,n){var t="";return""!==this.position[l][n]&&(t=this.position[l][n].toUpperCase()==this.position[l][n]?"white":"black"),new r(this.position[l][n],t)},l}(),a=t("xa0L"),c=function(){return function(){this.from="",this.to="",this.piece_moving="",this.piece_moving_color=""}}(),h=t("PSD3"),p=t.n(h),b=t("JEAp"),f=function(){return function(){}}(),_=t("L05t"),g=t("OptL"),d=t("sE5F"),v=t("AytR"),m=t("ZYCi"),k=function(){function l(l,n){this.http=l,this.router=n,this.url=v.a.api_lschess+"stockfish/",this.options=new d.g,this.options.headers=new d.d,this.options.headers.append("api_token",sessionStorage.getItem("api_token"))}return l.prototype.get_best_move=function(l,n){return this.http.post(this.url+"get_best_move",JSON.stringify({fen:l,thinking_time:n}),this.options).toPromise().then(function(l){return l.json()}).catch(function(l){l.json()})},l.prototype.handledError=function(l){console.log(l),sessionStorage.clear(),this.router.navigate(["/login"])},l.ngInjectableDef=e.U({factory:function(){return new l(e.Y(d.e),e.Y(m.l))},token:l,providedIn:"root"}),l}(),w=function(){function l(l,n,t){this.modalDialog=l,this.bestMoveDataService=n,this.stockfishDataService=t,this.chess=new a,this.player_white="Blancas",this.player_black="Negras",this.next_turn="white",this.white_can_queen_castling=!0,this.white_can_king_castling=!0,this.black_can_queen_castling=!0,this.black_can_king_castling=!0,this.newMove=new c,this.cordsX=["a","b","c","d","e","f","g","h"],this.cordsXI=["h","g","f","e","d","c","b","a"],this.cordsY=["8","7","6","5","4","3","2","1"],this.tiempoNegras="10:00",this.tiempoBlancas="10:00",this.editarPosicion=!1,this.current_position="",this.learning=!1,this.timeNegras=600,this.timeBlancas=600,this.time_running=!1,this.user="",this.current_move=0,this.checking_move=0,this.value_of_position={white_position:0,black_position:0,white_pieces:0,black_pieces:0,white_movility:0,black_movility:0},this.sizeLeftPanel=6,this.sizeRightPanel=6,this.editing_from={row:null,colum:null},this.addingPiece=new r(""),this.new_best_move=new g.a,this.last_move=new c,this.color_play_pc="none",this.can_play_pc=!1,this.analizando=!1,this.profundidad_analisis=0,this.index_posiciones_analisis=0,this.posiciones_analisis=[],this.posiciones_aprendidas=[],this.index_posiciones_aprendidas=0,this.board=new s(this.chess.fen().split(" ")[0],5)}return l.prototype.ngOnInit=function(){this.user=JSON.parse(sessionStorage.getItem("user"))},l.prototype.cargarPartida=function(l){var n=this,t=new FileReader;l.target.files&&l.target.files.length>0&&(t.readAsDataURL(l.target.files[0]),t.onload=function(){var l=t.result.toString().split(",")[1],e=JSON.parse(decodeURIComponent(escape(atob(l))));n.player_black=e.player_black,n.player_white=e.player_white,n.timeBlancas=e.time_white,n.timeNegras=e.time_black,n.load_PGN(e.pgn)})},l.prototype.white_king_castling=function(){this.white_can_king_castling=!this.white_can_king_castling},l.prototype.selectBuildingPiece=function(l,n){null!=this.editing_from.row&&this.board.drawBoard(),this.editing_from.colum=null,this.editing_from.row=null,this.addingPiece=this.board.selectAddingPiece(l,n)},l.prototype.analizar=function(){var l=this;this.analizando&&(this.analizando=!1),this.analizando||(this.analizando=!0,p.a.fire({title:"Profundidad de An\xe1lisis",input:"number",confirmButtonText:"Iniciar"}).then(function(n){l.profundidad_analisis=n.value>0?n.value:1,l.iniciar_analisis(l.profundidad_analisis)}))},l.prototype.evaluateBoard=function(l){"white"==l?(this.value_of_position.white_pieces=0,this.value_of_position.white_movility=0,this.value_of_position.white_position=0):(this.value_of_position.black_pieces=0,this.value_of_position.black_movility=0,this.value_of_position.black_position=0);for(var n=0;n<8;n++)for(var t=0;t<8;t++){var e=0,u=0;this.board.white_side?(e=n,u=t):(e=7-n,u=7-t);var i=this.cordsX[u]+this.cordsY[e],o=this.board.get_piece(e,u);""!==o.name&&("white"==l?"white"==o.color&&(this.value_of_position.white_pieces+=o.numerical_value,this.value_of_position.white_movility+=this.get_possible_moves(i).length,this.value_of_position.white_position=this.value_of_position.white_pieces+this.value_of_position.white_movility):"black"==o.color&&(this.value_of_position.black_pieces+=o.numerical_value,this.value_of_position.black_movility+=this.get_possible_moves(i).length,this.value_of_position.black_position=this.value_of_position.black_pieces+this.value_of_position.black_movility))}},l.prototype.white_queen_castling=function(){this.white_can_queen_castling=!this.white_can_queen_castling},l.prototype.black_king_castling=function(){this.black_can_king_castling=!this.black_can_king_castling},l.prototype.black_queen_castling=function(){this.black_can_queen_castling=!this.black_can_queen_castling},l.prototype.set_learning=function(){this.learning=!this.learning},l.prototype.load_PGN=function(l){this.chess.load_pgn(l),this.refresh_board(),this.refreshClock()},l.prototype.PGN2Cycles=function(l){var n=l.split("\n"),t=[];return n.forEach(function(l){var n=new f;n.id=parseInt(l.split(".")[0]),n.white_move=l.split(".")[1].split(" ")[1],n.black_move=l.split(".")[1].split(" ")[2],t.push(n)}),t},l.prototype.Cycles2PGN=function(l,n){var t="",e=0;return l.forEach(function(l){void 0!==n?(e<n&&(t+=l.id+". "+l.white_move,e++),e<n&&void 0!==l.black_move&&(t+=" "+l.black_move,e++),t+="\n"):(t+=l.id+". "+l.white_move,void 0!==l.black_move&&(t+=" "+l.black_move),t+="\n")}),t},l.prototype.preview_move=function(){var l=this.PGN2Cycles(this.current_position);this.checking_move=this.checking_move-1;var n=this.Cycles2PGN(l,this.checking_move);this.chess.load_pgn(n),this.board.newPosition(this.chess.fen().split(" ")[0]),this.chess.in_check()&&this.board.check(this.get_turn())},l.prototype.cleanBoard=function(){this.board.newPosition("8/8/8/8/8/8/8/8"),this.board.disableMaxCounts()},l.prototype.resetBoard=function(){this.board.newPosition("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),this.board.disableMaxCounts()},l.prototype.set_next_turn=function(){this.next_turn="white"==this.next_turn?"black":"white"},l.prototype.finishSetPosition=function(){this.editarPosicion=!1,this.set_position(this.board.get_fen())},l.prototype.cancelSetPosition=function(){this.editarPosicion=!1,this.refresh_board()},l.prototype.next_move=function(){var l=this.PGN2Cycles(this.current_position);this.checking_move=this.checking_move+1;var n=this.Cycles2PGN(l,this.checking_move);this.chess.load_pgn(n),this.board.newPosition(this.chess.fen().split(" ")[0]),this.chess.in_check()&&this.board.check(this.get_turn())},l.prototype.rotate_board=function(){this.board.rotate_board(),this.check_specials()},l.prototype.play_against_human=function(){this.can_play_pc=!1,this.color_play_pc="none"},l.prototype.play_against_pc=function(){this.can_play_pc=!0,this.color_play_pc=this.get_turn(),this.play_pc()},l.prototype.play_pc_against_pc=function(){this.can_play_pc=!0,this.color_play_pc="both",this.play_pc()},l.prototype.save_pgn=function(){var l={pgn:this.chess.pgn(),player_white:this.player_white,player_black:this.player_black,time_white:this.timeBlancas,time_black:this.timeNegras},n=new Blob([JSON.stringify(l)],{type:"text/plain"}),t=new Date;Object(b.saveAs)(n,t.toLocaleDateString()+"_chess.json")},l.prototype.setTimeBlancas=function(){var l=this;p.a.fire({title:"Tiempo Blancas (segundos)",input:"number",showCancelButton:!0,confirmButtonText:"Establecer"}).then(function(n){n.value>0&&(l.timeBlancas=n.value,l.refreshClock())})},l.prototype.reloj=function(){var l=this;this.chess.game_over()?this.time_running=!1:("white"==this.get_turn()?(this.current_move!=this.checking_move||this.editarPosicion||(this.timeBlancas=this.timeBlancas-1),this.refreshClock()):(this.current_move!=this.checking_move||this.editarPosicion||(this.timeNegras=this.timeNegras-1),this.refreshClock()),this.time_running&&setTimeout(function(){l.reloj()},1e3))},l.prototype.setTimeNegras=function(){var l=this;p.a.fire({title:"Tiempo Negras (segundos)",input:"number",showCancelButton:!0,confirmButtonText:"Establecer"}).then(function(n){n.value>0&&(l.timeNegras=n.value,l.refreshClock())})},l.prototype.clockText=function(l){var n=Math.round(l),t=0,e=0;n>60?(t=Math.floor(n/60),e=n-60*Math.floor(n/60)):e=n;var u=t.toString(),i=e.toString();return t<10&&(u="0"+u),e<10&&(i="0"+i),u+":"+i},l.prototype.refreshClock=function(){this.tiempoBlancas=this.clockText(this.timeBlancas),this.tiempoNegras=this.clockText(this.timeNegras),0==this.timeBlancas&&(this.time_running=!1,p.a.fire({title:"Fin del Tiempo",text:"Pierden las Blancas",type:"success",confirmButtonText:"Aceptar"})),0==this.timeNegras&&(this.time_running=!1,p.a.fire({title:"Fin del Tiempo",text:"Pierden las Negras",type:"success",confirmButtonText:"Aceptar"}))},l.prototype.new_game=function(){this.chess.reset(),this.refresh_board()},l.prototype.showPropotionMenu=function(l,n){var t=this;this.board.piecesPromote.forEach(function(l){l.setColor(t.get_turn())}),this.modalDialog.open(this.pawnPromotionModalDialog,{centered:!0}).result.then(function(e){t.chess.move({from:l,to:n,promotion:{rook:"r",knight:"n",bishop:"b",queen:"q",king:"k",pawn:"p"}[e]}),t.last_move.from=l,t.last_move.to=n,t.learn_move(),t.newMove=new c,t.refresh_board(),t.can_play_pc&&t.play_pc()},function(e){t.chess.move({from:l,to:n,promotion:"q"}),t.last_move.from=l,t.last_move.to=n,t.learn_move(),t.newMove=new c,t.refresh_board(),t.can_play_pc&&t.play_pc()})},l.prototype.play_pc=function(){var l=this;this.new_best_move.current_position=this.chess.fen().split(" ")[0]+" "+this.chess.turn(),this.bestMoveDataService.find(this.new_best_move.current_position).then(function(n){var t=n;if(0==t.length)l.stockfishDataService.get_best_move(l.chess.fen(),4e3).then(function(n){l.chess.move(""==n.promotion?{from:n.from,to:n.to}:{from:n.from,to:n.to,promotion:n.promotion}),l.last_move.from=n.from,l.last_move.to=n.to,l.new_best_move.response=l.get_last_move(),l.new_best_move.from=n.from,l.new_best_move.to=n.to,l.new_best_move.is__best=!0,l.bestMoveDataService.post(l.new_best_move).then(function(n){console.log("Aprendido"),"both"==l.color_play_pc&&l.play_pc()}).catch(function(l){console.log(l)}),l.refresh_board()}).catch(function(n){p.a.fire({title:"Me Rindo!",text:"Muy bien jugado. Felicidades!!!",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()})});else{var e=Math.floor(Math.random()*t.length);l.chess.move(n[e].response),l.last_move.from=n[e].from,l.last_move.to=n[e].to,l.refresh_board(),"both"==l.color_play_pc&&l.play_pc()}}).catch(function(l){console.log(l)})},l.prototype.play_pc_learning_last_move=function(){var l=this;this.new_best_move.current_position=this.chess.fen().split(" ")[0]+" "+this.chess.turn(),this.bestMoveDataService.find(this.new_best_move.current_position).then(function(n){var t=n;if(0==t.length)l.stockfishDataService.get_best_move(l.chess.fen(),4e3).then(function(n){l.chess.move(""==n.promotion?{from:n.from,to:n.to}:{from:n.from,to:n.to,promotion:n.promotion}),l.last_move.from=n.from,l.last_move.to=n.to,l.new_best_move.response=l.get_last_move(),l.new_best_move.from=n.from,l.new_best_move.to=n.to,l.new_best_move.is__best=!0,l.bestMoveDataService.post(l.new_best_move).then(function(n){console.log("Aprendido"),l.iniciar_aprendizaje(),"both"==l.color_play_pc&&l.play_pc()}).catch(function(l){console.log(l)}),l.refresh_board()}).catch(function(n){p.a.fire({title:"Me Rindo!",text:"Muy bien jugado. Felicidades!!!",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()})});else{var e=Math.floor(Math.random()*t.length);l.chess.move(n[e].response),l.last_move.from=n[e].from,l.last_move.to=n[e].to,l.refresh_board(),l.iniciar_aprendizaje(),"both"==l.color_play_pc&&l.play_pc()}}).catch(function(l){console.log(l)})},l.prototype.play_pc_learning=function(){var l=this;this.new_best_move.current_position=this.chess.fen().split(" ")[0]+" "+this.chess.turn(),this.bestMoveDataService.find(this.new_best_move.current_position).then(function(n){0==n.length?l.stockfishDataService.get_best_move(l.chess.fen(),4e3).then(function(n){l.chess.move(""==n.promotion?{from:n.from,to:n.to}:{from:n.from,to:n.to,promotion:n.promotion}),l.last_move.from=n.from,l.last_move.to=n.to,l.new_best_move.response=l.get_last_move(),l.new_best_move.from=n.from,l.new_best_move.to=n.to,l.new_best_move.is__best=!0,l.bestMoveDataService.post(l.new_best_move).then(function(n){l.aprender_analisis(),"both"==l.color_play_pc&&l.play_pc()}).catch(function(l){console.log(l)}),l.refresh_board()}).catch(function(n){p.a.fire({title:"Me Rindo!",text:"Muy bien jugado. Felicidades!!!",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()})}):(l.chess.move(n[0].response),l.last_move.from=n[0].from,l.last_move.to=n[0].to,l.refresh_board(),l.aprender_analisis(),"both"==l.color_play_pc&&l.play_pc())}).catch(function(l){console.log(l)})},l.prototype.establecerPosicion=function(){this.board.disableMaxCounts(),this.editarPosicion=!0},l.prototype.refresh_board=function(){this.board.newPosition(this.chess.fen().split(" ")[0]),this.current_position=this.chess.pgn({max_width:5,newline_char:"\n"}),this.board.show_last_move(this.last_move),this.check_specials()},l.prototype.move=function(l,n){var t=this;if("both"!=this.color_play_pc&&this.color_play_pc!=this.get_turn()){var e=0,u=0;if(this.last_move=new c,this.board.white_side?(e=l,u=n):(e=7-l,u=7-n),this.editarPosicion)if("empty"!==this.addingPiece.get_symbol())this.board.position[e][u]=this.addingPiece.get_symbol(),this.addingPiece=new r(""),this.board.drawBoard(),this.board.unselectBuildingPiece(),this.board.disableMaxCounts();else{if(""==this.board.position[e][u]&&null==this.editing_from.row)return;null==this.editing_from.row?(this.editing_from.row=e,this.editing_from.colum=u,this.board.disableMaxCounts(),this.board.selectPiece(l,n)):(this.editing_from.row==e&&this.editing_from.colum==u?this.board.position[e][u]="":(this.board.position[e][u]=this.board.position[this.editing_from.row][this.editing_from.colum],this.board.position[this.editing_from.row][this.editing_from.colum]=""),this.board.disableMaxCounts(),this.board.drawBoard(),this.editing_from.row=null,this.editing_from.colum=null)}else{if(this.current_move!==this.checking_move)return;if(this.chess.game_over()||0==this.timeBlancas||0==this.timeNegras)return void(this.time_running=!1);this.time_running||(this.time_running=!0,this.reloj());var i=this.get_square_piece(e,u);if(""==i.piece&&""==this.newMove.from)return;if(this.get_turn()!==i.color&&""==this.newMove.from)return;if(""==this.newMove.from||this.get_turn()==i.color){var o=this.get_square_piece(e,u);this.newMove.from=this.cordsX[u]+this.cordsY[e],this.newMove.piece_moving=o.piece,this.newMove.piece_moving_color=o.color,this.board.drawPossibleMoves(this.get_possible_moves(this.newMove.from),i.piece)}else{this.newMove.to=this.cordsX[u]+this.cordsY[e];var s=this.get_possible_moves(this.newMove.from),a=!1;if(s.forEach(function(l){l.to==t.newMove.to&&(a=!0)}),!a)return this.refresh_board(),this.newMove=new c,this.current_move++,void(this.checking_move=this.current_move);this.new_best_move.current_position=this.chess.fen().split(" ")[0]+" "+this.chess.turn(),0!=e&&7!=e||"p"!=this.newMove.piece_moving?(this.chess.move({from:this.newMove.from,to:this.newMove.to}),this.last_move.from=this.newMove.from,this.last_move.to=this.newMove.to,this.learn_move(),this.refresh_board(),this.newMove=new c,this.current_move++,this.checking_move=this.current_move,this.can_play_pc&&this.play_pc()):this.showPropotionMenu(this.newMove.from,this.newMove.to)}}}},l.prototype.learn_move=function(){var l=this;this.learning&&this.bestMoveDataService.find(this.new_best_move.current_position).then(function(n){var t=n;if(l.new_best_move.response=l.get_last_move(),l.new_best_move.from=l.last_move.from,l.new_best_move.to=l.last_move.to,l.new_best_move.is__best=!0,0==t.length)l.bestMoveDataService.post(l.new_best_move).then(function(l){console.log("Aprendido")}).catch(function(l){console.log(l)});else{var e=!1;t.forEach(function(n){n.response==l.get_last_move()&&(console.log("Conocido"),e=!0)}),e||l.bestMoveDataService.post(l.new_best_move).then(function(l){console.log("Aprendido")}).catch(function(l){console.log(l)})}}).catch(function(l){console.log(l)})},l.prototype.get_possible_moves=function(l){return void 0===l?this.chess.moves():this.chess.moves({square:l,verbose:!0})},l.prototype.get_square_piece=function(l,n){var t=this.board.position[l][n],e="";return""==t?{piece:"",color:""}:(e=t.toLowerCase()==t?"black":"white",{piece:t.toLowerCase(),color:e})},l.prototype.get_turn=function(){var l={w:"white",b:"black"}[this.chess.turn()];return this.evaluateBoard(l),l},l.prototype.get_PGN=function(){return"<strong>Hist\xf3rico</strong><br/>"+this.chess.pgn({max_width:5,newline_char:"<br />"})},l.prototype.get_last_move=function(){var l=this.chess.pgn({max_width:5,newline_char:"\n"}).split("\n");if(""!=l){var n=l[l.length-1].split(" ");return n[n.length-1]}return l},l.prototype.check_specials=function(){var l=this,n="Negras";"white"==this.get_turn()&&(n="Blancas"),this.chess.in_check()&&this.board.check(this.get_turn()),this.chess.in_checkmate()&&p.a.fire({title:"Jaque Mate!",text:"Pierden las "+n,type:"success",confirmButtonText:"Aceptar"}),this.chess.in_draw()&&(this.chess.in_stalemate()&&p.a.fire({title:"Tablas!",text:"Ahogado, no es posible hacer m\xe1s movimientos.",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()}),this.chess.in_threefold_repetition()&&p.a.fire({title:"Tablas!",text:"Repetici\xf3n.",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()}),this.chess.insufficient_material()&&p.a.fire({title:"Tablas!",text:"Material insuficiente.",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()}))},l.prototype.iniciar_analisis=function(l){var n=this;this.posiciones_aprendidas=[],this.bestMoveDataService.get().then(function(l){l.forEach(function(l){n.chess.load(l.current_position+" KQkq - 0 1"),n.chess.move(l.response),n.posiciones_aprendidas.push({fen:n.chess.fen(),aprendido:!1})}),n.index_posiciones_aprendidas=0,n.iniciar_aprendizaje()}).catch(function(l){console.log(l)})},l.prototype.iniciar_aprendizaje=function(){this.index_posiciones_aprendidas<this.posiciones_aprendidas.length?this.analizar_desde_posicion(this.posiciones_aprendidas[this.index_posiciones_aprendidas].fen):alert("terminado"),this.index_posiciones_aprendidas++},l.prototype.analizar_desde_posicion=function(l){var n=this;this.chess.load(l);var t=this.get_possible_moves();this.posiciones_analisis=[],this.index_posiciones_analisis=0,t.forEach(function(t){n.chess.load(l),n.chess.move(t),n.refresh_board(),n.posiciones_analisis.push(n.chess.fen())}),this.aprender_analisis()},l.prototype.aprender_analisis=function(){this.chess.load(this.posiciones_analisis[this.index_posiciones_analisis]),this.refresh_board(),this.index_posiciones_analisis++,this.index_posiciones_analisis<this.posiciones_analisis.length?this.play_pc_learning():this.play_pc_learning_last_move()},l.prototype.set_position=function(l){var n="",t="b";this.white_can_king_castling&&(n+="K"),this.white_can_queen_castling&&(n+="Q"),this.black_can_king_castling&&(n+="k"),this.black_can_queen_castling&&(n+="q"),""==n&&(n="-"),"white"==this.next_turn&&(t="w");var e=l+" "+t+" "+n+" - 0 1";l.search("k")>-1&&l.search("K")>-1&&this.chess.load(e),this.refresh_board()},l.prototype.undo_move=function(){this.chess.undo(),this.refresh_board()},l}(),y=t("4GxJ"),P=e.pb({encapsulation:0,styles:[[".tablero[_ngcontent-%COMP%]{margin:5px auto;background:#669;border:3px solid #29293d}.tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even)   td[_ngcontent-%COMP%]:nth-child(odd), .tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]:nth-child(even){background:url(http://desarrollo.lschess/assets/images/board/lightsquare.png) center/cover no-repeat #f0f0f5;border:1px solid #29293d}.tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even)   td[_ngcontent-%COMP%]:nth-child(even), .tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]:nth-child(odd){background:url(http://desarrollo.lschess/assets/images/board/darksquare.png) center/cover no-repeat #29293d;border:1px solid #29293d}.tablero[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover{filter:hue-rotate(45deg);-webkit-filter:hue-rotate(45deg);border:1px solid #adff2f}.tablero[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border-style:solid;border-width:1px}.white-turn[_ngcontent-%COMP%]{color:#fff;text-shadow:-1px 0 #000,0 2px #000,2px 0 #000,0 -1px #000}.black-turn[_ngcontent-%COMP%]{color:#3a3f4d;text-shadow:-1px 0 #000,0 2px #000,2px 0 #000,0 -1px #000}.square[_ngcontent-%COMP%]{padding:0;margin:0}.historical[_ngcontent-%COMP%]{width:72vh;margin:auto}.border-column[_ngcontent-%COMP%]{height:15px;font-size:6px;color:#000;font-weight:700}.border-row[_ngcontent-%COMP%]{width:15px;font-size:6px;color:#000;font-weight:700}.shadow[_ngcontent-%COMP%]{-webkit-filter:grayscale(100%) blur(5px) opacity(60%);filter:grayscale(100%) blur(5px) opacity(60%)}.disabled[_ngcontent-%COMP%]{-webkit-filter:grayscale(100%) brightness(110%) contrast(.9) opacity(40%);filter:grayscale(100%) brightness(110%) contrast(.9) opacity(40%)}.selected[_ngcontent-%COMP%]{-webkit-filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(50deg) saturate(1000%) contrast(.8);filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(50deg) saturate(1000%) contrast(.8)}.capture[_ngcontent-%COMP%]{-webkit-filter:invert(40%) grayscale(100%) brightness(40%) sepia(100%) hue-rotate(-20deg) saturate(400%) contrast(2);filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(-20deg) saturate(600%) contrast(.8)}.check[_ngcontent-%COMP%]{-webkit-filter:invert(40%) grayscale(100%) brightness(40%) sepia(100%) hue-rotate(-50deg) saturate(400%) contrast(2);filter:grayscale(100%) brightness(40%) sepia(100%) hue-rotate(-50deg) saturate(600%) contrast(.8)}.blackrook[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/br.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.blackknight[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/bn.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.blackbishop[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/bb.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.blackqueen[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/bq.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.blackking[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/bk.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.blackpawn[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/bp.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.whiterook[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/wr.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.whiteknight[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/wn.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.whitebishop[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/wb.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.whitequeen[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/wq.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.whiteking[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/wk.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.whitepawn[_ngcontent-%COMP%]{background-image:url(http://desarrollo.lschess/assets/images/board/wp.png);background-repeat:no-repeat,no-repeat;background-size:cover;background-position:center}.space[_ngcontent-%COMP%]{margin:auto;width:7.5vh;height:7.5vh;border:5px solid transparent}.space-from[_ngcontent-%COMP%]{border:5px solid rgba(255,255,0,.5)}.space-to[_ngcontent-%COMP%]{border:5px solid rgba(241,112,6,.5)}"]],data:{}});function x(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,2,"button",[["class","btn btn-dark"],["title","Nueva - P vs P"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.play_against_human()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null))],null,null)}function C(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,2,"button",[["class","btn btn-default"],["title","Nueva - P vs P"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.play_against_human()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null))],null,null)}function q(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,2,"button",[["class","btn btn-dark"],["title","Play PC"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.play_against_pc()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null))],null,null)}function M(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,2,"button",[["class","btn btn-default"],["title","Play PC"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.play_against_pc()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null))],null,null)}function I(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,2,"button",[["class","btn btn-dark"],["title","Nueva - IA vs IA"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.play_pc_against_pc()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null))],null,null)}function N(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,2,"button",[["class","btn btn-default"],["title","Nueva - IA vs IA"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.play_pc_against_pc()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null))],null,null)}function E(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"button",[["class","btn btn-default"],["title","Analizar y Aprender"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.analizar()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-diagnoses"]],null,null,null,null,null))],null,null)}function O(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"button",[["class","btn btn-dark"],["title","Analizar y Aprender"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.analizar()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-diagnoses"]],null,null,null,null,null))],null,null)}function S(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,0,"i",[["class","fas fa-square white-turn"]],null,null,null,null,null))],null,null)}function A(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,0,"i",[["class","fas fa-square black-turn"]],null,null,null,null,null))],null,null)}function L(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"td",[["class","border-row"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),e.Jb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.cordsY[n.parent.context.index])})}function T(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"td",[["class","border-row"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),e.Jb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.cordsY[7-n.parent.context.index])})}function B(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"td",[["class","square"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.move(l.parent.context.index,l.context.index)&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"div",[],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,1,0,e.tb(2,"space ",n.context.$implicit.border_css," ",n.context.$implicit.image,""))})}function Q(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,6,"tr",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,L)),e.qb(2,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,T)),e.qb(4,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,B)),e.qb(6,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,2,0,t.board.white_side),l(n,4,0,!t.board.white_side),l(n,6,0,n.context.$implicit)},null)}function R(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"td",[["class","border-column"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),e.Jb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit)})}function D(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,3,"tr",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,R)),e.qb(3,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.cordsX)},null)}function z(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"td",[["class","border-column"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),e.Jb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit)})}function J(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,3,"tr",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,z)),e.qb(3,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.cordsXI)},null)}function F(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"button",[["class","btn btn-dark"],["title","Aprender"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.set_learning()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-graduation-cap"]],null,null,null,null,null))],null,null)}function K(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"button",[["class","btn btn-default"],["title","Aprender"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.set_learning()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-graduation-cap"]],null,null,null,null,null))],null,null)}function j(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(1,null,["+",""]))],null,function(l,n){var t=n.component;l(n,1,0,t.value_of_position.white_pieces-t.value_of_position.black_pieces)})}function U(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,0,"div",[["style","display:inline-block; width: 20px; height: 20px;"]],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,0,0,e.tb(1,"",n.context.$implicit.image,""))})}function $(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(1,null,["+",""]))],null,function(l,n){var t=n.component;l(n,1,0,t.value_of_position.black_pieces-t.value_of_position.white_pieces)})}function G(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,0,"div",[["style","display:inline-block; width: 20px; height: 20px;"]],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,0,0,e.tb(1,"",n.context.$implicit.image,""))})}function Y(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"td",[["class","square"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.selectBuildingPiece(l.parent.context.index,l.context.index)&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"div",[],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,1,0,e.tb(1,"space ",n.context.$implicit.image,""))})}function H(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,Y)),e.qb(2,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.context.$implicit)},null)}function W(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,0,"i",[["class","fas fa-square white-turn"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.set_next_turn()&&e),e},null,null))],null,null)}function X(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,0,"i",[["class","fas fa-square black-turn"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.set_next_turn()&&e),e},null,null))],null,null)}function Z(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.white_queen_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function V(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.white_queen_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function ll(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.white_king_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function nl(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.white_king_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function tl(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.black_queen_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function el(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.black_queen_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function ul(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.black_king_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function il(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.black_king_castling()&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function ol(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,65,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,4,"div",[["class","col-12"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,3,"table",[["class","tablero"]],null,null,null,null,null)),(l()(),e.rb(3,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,H)),e.qb(5,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null),(l()(),e.rb(6,0,null,null,59,"div",[["class","col-12 text-center"]],null,null,null,null,null)),(l()(),e.rb(7,0,null,null,24,"table",[["style","width: 54vh; margin: auto;"]],null,null,null,null,null)),(l()(),e.rb(8,0,null,null,23,"tbody",[],null,null,null,null,null)),(l()(),e.rb(9,0,null,null,22,"tr",[],null,null,null,null,null)),(l()(),e.rb(10,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),e.rb(11,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),e.rb(12,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Juegan:"])),(l()(),e.rb(14,0,null,null,6,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),e.rb(15,0,null,null,5,"label",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["\xa0"])),(l()(),e.ib(16777216,null,null,1,null,W)),e.qb(18,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,X)),e.qb(20,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(21,0,null,null,10,"td",[],null,null,null,null,null)),(l()(),e.rb(22,0,null,null,2,"button",[["class","btn btn-default mr-2"],["title","Limpiar Tablero"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.cleanBoard()&&e),e},null,null)),(l()(),e.rb(23,0,null,null,0,"i",[["class","fas fa-eraser"]],null,null,null,null,null)),(l()(),e.rb(24,0,null,null,0,"i",[["class","fas fa-chess-board"]],null,null,null,null,null)),(l()(),e.rb(25,0,null,null,2,"button",[["class","btn btn-default mr-2"],["title","Reiniciar Posici\xf3n"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.resetBoard()&&e),e},null,null)),(l()(),e.rb(26,0,null,null,0,"i",[["class","fas fa-sync"]],null,null,null,null,null)),(l()(),e.rb(27,0,null,null,0,"i",[["class","fas fa-chess-board"]],null,null,null,null,null)),(l()(),e.rb(28,0,null,null,1,"button",[["class","btn btn-success mr-2"],["title","Aceptar"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.finishSetPosition()&&e),e},null,null)),(l()(),e.rb(29,0,null,null,0,"i",[["class","fas fa-check-circle"]],null,null,null,null,null)),(l()(),e.rb(30,0,null,null,1,"button",[["class","btn btn-danger"],["title","Cancelar"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.cancelSetPosition()&&e),e},null,null)),(l()(),e.rb(31,0,null,null,0,"i",[["class","fas fa-times-circle"]],null,null,null,null,null)),(l()(),e.rb(32,0,null,null,33,"table",[["class","mt-2"],["style","width: 54vh; margin: auto;"]],null,null,null,null,null)),(l()(),e.rb(33,0,null,null,32,"tbody",[],null,null,null,null,null)),(l()(),e.rb(34,0,null,null,15,"tr",[],null,null,null,null,null)),(l()(),e.rb(35,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),e.rb(36,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),e.rb(37,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Enroques Blancas:"])),(l()(),e.rb(39,0,null,null,10,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),e.Jb(-1,null,["\xa0"])),(l()(),e.ib(16777216,null,null,1,null,Z)),e.qb(42,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,V)),e.qb(44,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.Jb(-1,null,["\xa0"])),(l()(),e.ib(16777216,null,null,1,null,ll)),e.qb(47,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,nl)),e.qb(49,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(50,0,null,null,15,"tr",[],null,null,null,null,null)),(l()(),e.rb(51,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),e.rb(52,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),e.rb(53,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Enroques Negras:"])),(l()(),e.rb(55,0,null,null,10,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),e.Jb(-1,null,["\xa0"])),(l()(),e.ib(16777216,null,null,1,null,tl)),e.qb(58,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,el)),e.qb(60,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.Jb(-1,null,["\xa0"])),(l()(),e.ib(16777216,null,null,1,null,ul)),e.qb(63,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,il)),e.qb(65,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,5,0,t.board.buildingPieces),l(n,18,0,"white"==t.next_turn),l(n,20,0,"black"==t.next_turn),l(n,42,0,t.white_can_queen_castling),l(n,44,0,!t.white_can_queen_castling),l(n,47,0,t.white_can_king_castling),l(n,49,0,!t.white_can_king_castling),l(n,58,0,t.black_can_queen_castling),l(n,60,0,!t.black_can_queen_castling),l(n,63,0,t.black_can_king_castling),l(n,65,0,!t.black_can_king_castling)},null)}function rl(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"td",[["class","square"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.parent.context.close(l.context.$implicit.name)&&e),e},null,null)),(l()(),e.rb(1,0,null,null,0,"div",[],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,1,0,e.tb(1,"",n.context.$implicit.image,""))})}function sl(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,6,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,2,"h4",[["class","modal-title"],["id","modal-basic-title"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Promoci\xf3n de Pe\xf3n - Seleccione:"])),(l()(),e.rb(4,0,null,null,2,"button",[["class","close"],["type","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.context.dismiss("Cross click")&&e),e},null,null)),(l()(),e.rb(5,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["\xd7"])),(l()(),e.rb(7,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.rb(8,0,null,null,4,"table",[],null,null,null,null,null)),(l()(),e.rb(9,0,null,null,3,"tbody",[],null,null,null,null,null)),(l()(),e.rb(10,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,rl)),e.qb(12,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null),(l()(),e.rb(13,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),e.rb(14,0,null,null,1,"button",[["class","btn btn-outline-danger"],["type","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.context.dismiss("Cross click")&&e),e},null,null)),(l()(),e.Jb(-1,null,[" Cancelar "])),(l()(),e.rb(16,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.context.close("ok")&&e),e},null,null)),(l()(),e.Jb(-1,null,[" Aceptar "]))],function(l,n){l(n,12,0,n.component.board.piecesPromote)},null)}function al(l){return e.Lb(0,[e.Hb(402653184,1,{pawnPromotionModalDialog:0}),(l()(),e.rb(1,0,[["cargarPartidaInput",1]],null,0,"input",[["accept",".json"],["name","files[]"],["type","file"]],[[8,"hidden",0]],[[null,"change"]],function(l,n,t){var e=!0;return"change"===n&&(e=!1!==l.component.cargarPartida(t)&&e),e},null,null)),(l()(),e.rb(2,0,null,null,53,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.rb(3,0,null,null,7,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),e.rb(4,0,null,null,6,"div",[["class","historical"]],null,null,null,null,null)),(l()(),e.rb(5,0,null,null,1,"button",[["class","btn btn-info col-4"],["title","Movimiento Anterior"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.preview_move()&&e),e},null,null)),(l()(),e.rb(6,0,null,null,0,"i",[["class","fas fa-angle-left"]],null,null,null,null,null)),(l()(),e.rb(7,0,null,null,1,"button",[["class","btn btn-secondary col-3 ml-2 mr-2"],["title","Rotar Tablero"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.rotate_board()&&e),e},null,null)),(l()(),e.rb(8,0,null,null,0,"i",[["class","fas fa-sync"]],null,null,null,null,null)),(l()(),e.rb(9,0,null,null,1,"button",[["class","btn btn-info col-4"],["title","Movimiento Siguiente"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.next_move()&&e),e},null,null)),(l()(),e.rb(10,0,null,null,0,"i",[["class","fas fa-angle-right"]],null,null,null,null,null)),(l()(),e.rb(11,0,null,null,44,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),e.rb(12,0,null,null,43,"table",[["class","col-12"]],null,null,null,null,null)),(l()(),e.rb(13,0,null,null,42,"tbody",[],null,null,null,null,null)),(l()(),e.rb(14,0,null,null,41,"tr",[],null,null,null,null,null)),(l()(),e.rb(15,0,null,null,19,"td",[],null,null,null,null,null)),(l()(),e.rb(16,0,null,null,18,"div",[["aria-label","Toolbar with button groups"],["class","btn-toolbar"],["role","toolbar"]],null,null,null,null,null)),(l()(),e.rb(17,0,null,null,12,"div",[["aria-label","First group"],["class","btn-group"],["role","group"]],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,x)),e.qb(19,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,C)),e.qb(21,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,q)),e.qb(23,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,M)),e.qb(25,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,I)),e.qb(27,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,N)),e.qb(29,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(30,0,null,null,4,"div",[["aria-label","Second group"],["class","btn-group ml-2"],["role","group"]],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,E)),e.qb(32,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,O)),e.qb(34,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(35,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),e.rb(36,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),e.rb(37,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Juegan:"])),(l()(),e.rb(39,0,null,null,6,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),e.rb(40,0,null,null,5,"label",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["\xa0"])),(l()(),e.ib(16777216,null,null,1,null,S)),e.qb(43,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,A)),e.qb(45,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(46,0,null,null,4,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),e.rb(47,0,null,null,3,"label",[],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.setTimeBlancas()&&e),e},null,null)),(l()(),e.rb(48,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Blancas:"])),(l()(),e.Jb(50,null,["\xa0",""])),(l()(),e.rb(51,0,null,null,4,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),e.rb(52,0,null,null,3,"label",[],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.setTimeNegras()&&e),e},null,null)),(l()(),e.rb(53,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Negras:"])),(l()(),e.Jb(55,null,["\xa0",""])),(l()(),e.rb(56,0,null,null,70,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.rb(57,0,null,null,8,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),e.rb(58,0,null,null,7,"table",[["class","tablero"]],null,null,null,null,null)),(l()(),e.rb(59,0,null,null,6,"tbody",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,Q)),e.qb(61,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null),(l()(),e.ib(16777216,null,null,1,null,D)),e.qb(63,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,J)),e.qb(65,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(66,0,null,null,60,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),e.rb(67,0,null,null,57,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),e.rb(68,0,null,null,20,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),e.rb(69,0,null,null,17,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.rb(70,0,null,null,16,"div",[["class","col-12"]],null,null,null,null,null)),(l()(),e.rb(71,0,null,null,15,"div",[["aria-label","Toolbar with button groups"],["class","btn-toolbar"],["role","toolbar"]],null,null,null,null,null)),(l()(),e.rb(72,0,null,null,6,"div",[["aria-label","First group"],["class","btn-group mr-2"],["role","group"]],null,null,null,null,null)),(l()(),e.rb(73,0,null,null,1,"button",[["class","btn btn-info"],["title","Deshacer Movimiento"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.undo_move()&&e),e},null,null)),(l()(),e.rb(74,0,null,null,0,"i",[["class","fas fa-arrow-left"]],null,null,null,null,null)),(l()(),e.rb(75,0,null,null,1,"button",[["class","btn btn-info"],["title","Guardar Partida"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.save_pgn()&&e),e},null,null)),(l()(),e.rb(76,0,null,null,0,"i",[["class","fas fa-save"]],null,null,null,null,null)),(l()(),e.rb(77,0,null,null,1,"button",[["class","btn btn-info"],["title","Cargar Partida"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e.Bb(l,1).click()&&u),u},null,null)),(l()(),e.rb(78,0,null,null,0,"i",[["class","fas fa-folder-open"]],null,null,null,null,null)),(l()(),e.rb(79,0,null,null,2,"div",[["aria-label","First group"],["class","btn-group mr-2"],["role","group"]],null,null,null,null,null)),(l()(),e.rb(80,0,null,null,1,"button",[["class","btn btn-info"],["title","Establecer Posici\xf3n"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.establecerPosicion()&&e),e},null,null)),(l()(),e.rb(81,0,null,null,0,"i",[["class","fas fa-tools"]],null,null,null,null,null)),(l()(),e.rb(82,0,null,null,4,"div",[["aria-label","First group"],["class","btn-group"],["role","group"]],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,F)),e.qb(84,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(16777216,null,null,1,null,K)),e.qb(86,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(87,0,null,null,1,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),e.rb(88,0,null,null,0,"div",[["class","col-12"],["style","overflow-y: auto; overflow-x: hidden; height: 200px;"]],[[8,"innerHTML",1]],null,null,null,null)),(l()(),e.rb(89,0,null,null,35,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),e.rb(90,0,null,null,34,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.rb(91,0,null,null,33,"table",[["style","width: 100%; text-align: left;"]],null,null,null,null,null)),(l()(),e.rb(92,0,null,null,32,"tbody",[],null,null,null,null,null)),(l()(),e.rb(93,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),e.rb(94,0,null,null,1,"th",[["colspan","2"],["style","text-align: center;"]],null,null,null,null,null)),(l()(),e.Jb(95,null,["",""])),(l()(),e.rb(96,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),e.rb(97,0,null,null,3,"th",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Capturas "])),(l()(),e.ib(16777216,null,null,1,null,j)),e.qb(100,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(101,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,U)),e.qb(103,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null),(l()(),e.rb(104,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),e.rb(105,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Movilidad"])),(l()(),e.rb(107,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Jb(108,null,[" "," "])),(l()(),e.rb(109,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),e.rb(110,0,null,null,1,"th",[["colspan","2"],["style","text-align: center;"]],null,null,null,null,null)),(l()(),e.Jb(111,null,["",""])),(l()(),e.rb(112,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),e.rb(113,0,null,null,3,"th",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Capturas "])),(l()(),e.ib(16777216,null,null,1,null,$)),e.qb(116,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(117,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,G)),e.qb(119,278528,null,0,o.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null),(l()(),e.rb(120,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),e.rb(121,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Jb(-1,null,["Movilidad"])),(l()(),e.rb(123,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Jb(124,null,[" "," "])),(l()(),e.ib(16777216,null,null,1,null,ol)),e.qb(126,16384,null,0,o.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(l()(),e.ib(0,[[1,2],["pawnPromotionModalDialog",2]],null,0,null,sl))],function(l,n){var t=n.component;l(n,19,0,"none"==t.color_play_pc),l(n,21,0,"none"!==t.color_play_pc),l(n,23,0,"white"==t.color_play_pc||"black"==t.color_play_pc),l(n,25,0,!("white"==t.color_play_pc||"black"==t.color_play_pc)),l(n,27,0,"both"==t.color_play_pc),l(n,29,0,"both"!==t.color_play_pc),l(n,32,0,!t.analizando),l(n,34,0,t.analizando),l(n,43,0,"white"==t.get_turn()),l(n,45,0,"black"==t.get_turn()),l(n,61,0,t.board.pieces),l(n,63,0,t.board.white_side),l(n,65,0,!t.board.white_side),l(n,84,0,t.learning),l(n,86,0,!t.learning),l(n,100,0,t.value_of_position.white_pieces-t.value_of_position.black_pieces>0&&t.value_of_position.white_pieces-t.value_of_position.black_pieces<1039),l(n,103,0,t.board.captured_by_white),l(n,116,0,t.value_of_position.black_pieces-t.value_of_position.white_pieces>0&&t.value_of_position.black_pieces-t.value_of_position.white_pieces<1039),l(n,119,0,t.board.captured_by_black),l(n,126,0,t.editarPosicion)},function(l,n){var t=n.component;l(n,1,0,!0),l(n,5,0,0==t.checking_move),l(n,9,0,t.checking_move==t.current_move),l(n,50,0,t.tiempoBlancas),l(n,55,0,t.tiempoNegras),l(n,88,0,t.get_PGN()),l(n,95,0,t.player_white),l(n,108,0,t.value_of_position.white_movility),l(n,111,0,t.player_black),l(n,124,0,t.value_of_position.black_movility)})}function cl(l){return e.Lb(0,[(l()(),e.rb(0,0,null,null,1,"app-main",[],null,null,null,al,P)),e.qb(1,114688,null,0,w,[y.v,_.a,k],null,null)],function(l,n){l(n,1,0)},null)}var hl=e.nb("app-main",w,cl,{},{},[]),pl=function(){return function(){}}();t.d(n,"MainModuleNgFactory",function(){return bl});var bl=e.ob(u,[],function(l){return e.yb([e.zb(512,e.j,e.db,[[8,[i.a,hl]],[3,e.j],e.y]),e.zb(4608,o.n,o.m,[e.v,[2,o.C]]),e.zb(4608,_.a,_.a,[d.e,m.l]),e.zb(4608,k,k,[d.e,m.l]),e.zb(1073742336,o.b,o.b,[]),e.zb(1073742336,m.o,m.o,[[2,m.u],[2,m.l]]),e.zb(1073742336,pl,pl,[]),e.zb(1073742336,u,u,[]),e.zb(1024,m.j,function(){return[[{path:"",component:w}]]},[])])})},xa0L:function(l,n,t){var e,u=function(l){var n="b",t="w",e=-1,u="p",i="n",o="b",r="r",s="q",a="k",c="pnbrqkPNBRQK",h="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",p=["1-0","0-1","1/2-1/2","*"],b={b:[16,32,17,15],w:[-16,-32,-17,-15]},f={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},_=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],g=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],d={p:0,n:1,b:2,r:3,q:4,k:5},v={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},m={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},k=7,w=6,y=1,P=0,x={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},C={w:[{square:x.a1,flag:m.QSIDE_CASTLE},{square:x.h1,flag:m.KSIDE_CASTLE}],b:[{square:x.a8,flag:m.QSIDE_CASTLE},{square:x.h8,flag:m.KSIDE_CASTLE}]},q=new Array(128),M={w:e,b:e},I=t,N={w:0,b:0},E=e,O=0,S=1,A=[],L={};function T(){q=new Array(128),M={w:e,b:e},I=t,N={w:0,b:0},E=e,O=0,S=1,A=[],L={},J(D())}function B(){Q(h)}function Q(l){var u=l.split(/\s+/),i=u[0],o=0;if(!R(l).valid)return!1;T();for(var r=0;r<i.length;r++){var s=i.charAt(r);if("/"===s)o+=8;else if(-1!=="0123456789".indexOf(s))o+=parseInt(s,10);else{var a=s<"a"?t:n;K({type:s.toLowerCase(),color:a},ol(o)),o++}}return I=u[1],u[2].indexOf("K")>-1&&(N.w|=m.KSIDE_CASTLE),u[2].indexOf("Q")>-1&&(N.w|=m.QSIDE_CASTLE),u[2].indexOf("k")>-1&&(N.b|=m.KSIDE_CASTLE),u[2].indexOf("q")>-1&&(N.b|=m.QSIDE_CASTLE),E="-"===u[3]?e:x[u[3]],O=parseInt(u[4],10),S=parseInt(u[5],10),J(D()),!0}function R(l){var n=l.split(/\s+/);if(6!==n.length)return{valid:!1,error_number:1,error:"FEN string must contain six space-delimited fields."};if(isNaN(n[5])||parseInt(n[5],10)<=0)return{valid:!1,error_number:2,error:"6th field (move number) must be a positive integer."};if(isNaN(n[4])||parseInt(n[4],10)<0)return{valid:!1,error_number:3,error:"5th field (half move counter) must be a non-negative integer."};if(!/^(-|[abcdefgh][36])$/.test(n[3]))return{valid:!1,error_number:4,error:"4th field (en-passant square) is invalid."};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(n[2]))return{valid:!1,error_number:5,error:"3rd field (castling availability) is invalid."};if(!/^(w|b)$/.test(n[1]))return{valid:!1,error_number:6,error:"2nd field (side to move) is invalid."};var t=n[0].split("/");if(8!==t.length)return{valid:!1,error_number:7,error:"1st field (piece positions) does not contain 8 '/'-delimited rows."};for(var e=0;e<t.length;e++){for(var u=0,i=!1,o=0;o<t[e].length;o++)if(isNaN(t[e][o])){if(!/^[prnbqkPRNBQK]$/.test(t[e][o]))return{valid:!1,error_number:9,error:"1st field (piece positions) is invalid [invalid piece]."};u+=1,i=!1}else{if(i)return{valid:!1,error_number:8,error:"1st field (piece positions) is invalid [consecutive numbers]."};u+=parseInt(t[e][o],10),i=!0}if(8!==u)return{valid:!1,error_number:10,error:"1st field (piece positions) is invalid [row too large]."}}return"3"==n[3][1]&&"w"==n[1]||"6"==n[3][1]&&"b"==n[1]?{valid:!1,error_number:11,error:"Illegal en-passant square"}:{valid:!0,error_number:0,error:"No errors."}}function D(){for(var l=0,u="",i=x.a8;i<=x.h1;i++){if(null==q[i])l++;else{l>0&&(u+=l,l=0);var o=q[i].type;u+=q[i].color===t?o.toUpperCase():o.toLowerCase()}i+1&136&&(l>0&&(u+=l),i!==x.h1&&(u+="/"),l=0,i+=8)}var r="";N[t]&m.KSIDE_CASTLE&&(r+="K"),N[t]&m.QSIDE_CASTLE&&(r+="Q"),N[n]&m.KSIDE_CASTLE&&(r+="k"),N[n]&m.QSIDE_CASTLE&&(r+="q"),r=r||"-";var s=E===e?"-":ol(E);return[u,I,r,s,O,S].join(" ")}function z(l){for(var n=0;n<l.length;n+=2)"string"==typeof l[n]&&"string"==typeof l[n+1]&&(L[l[n]]=l[n+1]);return L}function J(l){A.length>0||(l!==h?(L.SetUp="1",L.FEN=l):(delete L.SetUp,delete L.FEN))}function F(l){var n=q[x[l]];return n?{type:n.type,color:n.color}:null}function K(l,n){if(!("type"in l&&"color"in l))return!1;if(-1===c.indexOf(l.type.toLowerCase()))return!1;if(!(n in x))return!1;var t=x[n];return(l.type!=a||M[l.color]==e||M[l.color]==t)&&(q[t]={type:l.type,color:l.color},l.type===a&&(M[l.color]=t),J(D()),!0)}function j(l,n,t,e,i){var o={color:I,from:n,to:t,flags:e,piece:l[n].type};return i&&(o.flags|=m.PROMOTION,o.promotion=i),l[t]?o.captured=l[t].type:e&m.EP_CAPTURE&&(o.captured=u),o}function U(l){function n(l,n,t,e,a){if(l[t].type!==u||ul(e)!==P&&ul(e)!==k)n.push(j(l,t,e,a));else for(var c=[s,r,o,i],h=0,p=c.length;h<p;h++)n.push(j(l,t,e,a,c[h]))}var t=[],e=I,a=rl(e),c={b:y,w:w},h=x.a8,p=x.h1,_=!1,g=!(void 0!==l&&"legal"in l)||l.legal;if(void 0!==l&&"square"in l){if(!(l.square in x))return[];h=p=x[l.square],_=!0}for(var d=h;d<=p;d++)if(136&d)d+=7;else{var v=q[d];if(null!=v&&v.color===e)if(v.type===u){if(null==q[C=d+b[e][0]]){n(q,t,d,C,m.NORMAL);var C=d+b[e][1];c[e]===ul(d)&&null==q[C]&&n(q,t,d,C,m.BIG_PAWN)}for(O=2;O<4;O++)136&(C=d+b[e][O])||(null!=q[C]&&q[C].color===a?n(q,t,d,C,m.CAPTURE):C===E&&n(q,t,d,E,m.EP_CAPTURE))}else for(var O=0,S=f[v.type].length;O<S;O++){var A=f[v.type][O];for(C=d;!(136&(C+=A));){if(null!=q[C]){if(q[C].color===e)break;n(q,t,d,C,m.CAPTURE);break}if(n(q,t,d,C,m.NORMAL),"n"===v.type||"k"===v.type)break}}}if(!_||p===M[e]){if(N[e]&m.KSIDE_CASTLE){var L=(T=M[e])+2;null!=q[T+1]||null!=q[L]||Y(a,M[e])||Y(a,T+1)||Y(a,L)||n(q,t,M[e],L,m.KSIDE_CASTLE)}var T;N[e]&m.QSIDE_CASTLE&&(L=(T=M[e])-2,null!=q[T-1]||null!=q[T-2]||null!=q[T-3]||Y(a,M[e])||Y(a,T-1)||Y(a,L)||n(q,t,M[e],L,m.QSIDE_CASTLE))}if(!g)return t;var B=[];for(d=0,S=t.length;d<S;d++)nl(t[d]),H(e)||B.push(t[d]),tl();return B}function $(l,n){var t="";if(l.flags&m.KSIDE_CASTLE)t="O-O";else if(l.flags&m.QSIDE_CASTLE)t="O-O-O";else{var e=function(l,n){for(var t=U({legal:!n}),e=l.from,u=l.to,i=l.piece,o=0,r=0,s=0,a=0,c=t.length;a<c;a++){var h=t[a].from;i===t[a].piece&&e!==h&&u===t[a].to&&(o++,ul(e)===ul(h)&&r++,il(e)===il(h)&&s++)}return o>0?r>0&&s>0?ol(e):s>0?ol(e).charAt(1):ol(e).charAt(0):""}(l,n);l.piece!==u&&(t+=l.piece.toUpperCase()+e),l.flags&(m.CAPTURE|m.EP_CAPTURE)&&(l.piece===u&&(t+=ol(l.from)[0]),t+="x"),t+=ol(l.to),l.flags&m.PROMOTION&&(t+="="+l.promotion.toUpperCase())}return nl(l),W()&&(X()?t+="#":t+="+"),tl(),t}function G(l){return l.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function Y(l,e){for(var i=x.a8;i<=x.h1;i++)if(136&i)i+=7;else if(null!=q[i]&&q[i].color===l){var o=q[i],r=i-e,s=r+119;if(_[s]&1<<d[o.type]){if(o.type===u){if(r>0){if(o.color===t)return!0}else if(o.color===n)return!0;continue}if("n"===o.type||"k"===o.type)return!0;for(var a=g[s],c=i+a,h=!1;c!==e;){if(null!=q[c]){h=!0;break}c+=a}if(!h)return!0}}return!1}function H(l){return Y(rl(l),M[l])}function W(){return H(I)}function X(){return W()&&0===U().length}function Z(){return!W()&&0===U().length}function V(){for(var l={},n=[],t=0,e=0,u=x.a8;u<=x.h1;u++)if(e=(e+1)%2,136&u)u+=7;else{var r=q[u];r&&(l[r.type]=r.type in l?l[r.type]+1:1,r.type===o&&n.push(e),t++)}if(2===t)return!0;if(3===t&&(1===l[o]||1===l[i]))return!0;if(t===l[o]+2){var s=0,a=n.length;for(u=0;u<a;u++)s+=n[u];if(0===s||s===a)return!0}return!1}function ll(){for(var l=[],n={},t=!1;;){var e=tl();if(!e)break;l.push(e)}for(;;){var u=D().split(" ").slice(0,4).join(" ");if(n[u]=u in n?n[u]+1:1,n[u]>=3&&(t=!0),!l.length)break;nl(l.pop())}return t}function nl(l){var t=I,i=rl(t);if(function(l){A.push({move:l,kings:{b:M.b,w:M.w},turn:I,castling:{b:N.b,w:N.w},ep_square:E,half_moves:O,move_number:S})}(l),q[l.to]=q[l.from],q[l.from]=null,l.flags&m.EP_CAPTURE&&(I===n?q[l.to-16]=null:q[l.to+16]=null),l.flags&m.PROMOTION&&(q[l.to]={type:l.promotion,color:t}),q[l.to].type===a){if(M[q[l.to].color]=l.to,l.flags&m.KSIDE_CASTLE)q[l.to-1]=q[o=l.to+1],q[o]=null;else if(l.flags&m.QSIDE_CASTLE){var o;q[l.to+1]=q[o=l.to-2],q[o]=null}N[t]=""}if(N[t])for(var r=0,s=C[t].length;r<s;r++)if(l.from===C[t][r].square&&N[t]&C[t][r].flag){N[t]^=C[t][r].flag;break}if(N[i])for(r=0,s=C[i].length;r<s;r++)if(l.to===C[i][r].square&&N[i]&C[i][r].flag){N[i]^=C[i][r].flag;break}E=l.flags&m.BIG_PAWN?"b"===I?l.to-16:l.to+16:e,l.piece===u?O=0:l.flags&(m.CAPTURE|m.EP_CAPTURE)?O=0:O++,I===n&&S++,I=rl(I)}function tl(){var l=A.pop();if(null==l)return null;var t=l.move;M=l.kings,N=l.castling,E=l.ep_square,O=l.half_moves,S=l.move_number;var e,i,o=I=l.turn,r=rl(I);return q[t.from]=q[t.to],q[t.from].type=t.piece,q[t.to]=null,t.flags&m.CAPTURE?q[t.to]={type:t.captured,color:r}:t.flags&m.EP_CAPTURE&&(q[o===n?t.to-16:t.to+16]={type:u,color:r}),t.flags&(m.KSIDE_CASTLE|m.QSIDE_CASTLE)&&(t.flags&m.KSIDE_CASTLE?(e=t.to+1,i=t.to-1):t.flags&m.QSIDE_CASTLE&&(e=t.to-2,i=t.to+1),q[e]=q[i],q[i]=null),t}function el(l,n){var t=G(l);if(n){var e=t.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(e)var u=e[1],i=e[2],o=e[3],r=e[4]}for(var s=U(),a=0,c=s.length;a<c;a++){if(t===G($(s[a]))||n&&t===G($(s[a],!0)))return s[a];if(e&&(!u||u.toLowerCase()==s[a].piece)&&x[i]==s[a].from&&x[o]==s[a].to&&(!r||r.toLowerCase()==s[a].promotion))return s[a]}return null}function ul(l){return l>>4}function il(l){return 15&l}function ol(l){var n=il(l),t=ul(l);return"abcdefgh".substring(n,n+1)+"87654321".substring(t,t+1)}function rl(l){return l===t?n:t}function sl(l){var n=function l(n){var t=n instanceof Array?[]:{};for(var e in n)t[e]="object"==typeof e?l(n[e]):n[e];return t}(l);n.san=$(n,!1),n.to=ol(n.to),n.from=ol(n.from);var t="";for(var e in m)m[e]&n.flags&&(t+=v[e]);return n.flags=t,n}function al(l){return l.replace(/^\s+|\s+$/g,"")}return Q(void 0===l?h:l),{WHITE:t,BLACK:n,PAWN:u,KNIGHT:i,BISHOP:o,ROOK:r,QUEEN:s,KING:a,SQUARES:function(){for(var l=[],n=x.a8;n<=x.h1;n++)136&n?n+=7:l.push(ol(n));return l}(),FLAGS:v,load:function(l){return Q(l)},reset:function(){return B()},moves:function(l){for(var n=U(l),t=[],e=0,u=n.length;e<u;e++)t.push(void 0!==l&&"verbose"in l&&l.verbose?sl(n[e]):$(n[e],!1));return t},in_check:function(){return W()},in_checkmate:function(){return X()},in_stalemate:function(){return Z()},in_draw:function(){return O>=100||Z()||V()||ll()},insufficient_material:function(){return V()},in_threefold_repetition:function(){return ll()},game_over:function(){return O>=100||X()||Z()||V()||ll()},validate_fen:function(l){return R(l)},fen:function(){return D()},pgn:function(l){var n="object"==typeof l&&"string"==typeof l.newline_char?l.newline_char:"\n",t="object"==typeof l&&"number"==typeof l.max_width?l.max_width:0,e=[],u=!1;for(var i in L)e.push("["+i+' "'+L[i]+'"]'+n),u=!0;u&&A.length&&e.push(n);for(var o=[];A.length>0;)o.push(tl());for(var r=[],s="";o.length>0;){var a=o.pop();A.length||"b"!==a.color?"w"===a.color&&(s.length&&r.push(s),s=S+"."):s=S+". ...",s=s+" "+$(a,!1),nl(a)}if(s.length&&r.push(s),void 0!==L.Result&&r.push(L.Result),0===t)return e.join("")+r.join(" ");var c=0;for(i=0;i<r.length;i++)c+r[i].length>t&&0!==i?(" "===e[e.length-1]&&e.pop(),e.push(n),c=0):0!==i&&(e.push(" "),c++),e.push(r[i]),c+=r[i].length;return e.join("")},load_pgn:function(l,n){var t=void 0!==n&&"sloppy"in n&&n.sloppy;function e(l){return l.replace(/\\/g,"\\")}var u="object"==typeof n&&"string"==typeof n.newline_char?n.newline_char:"\r?\n",i=new RegExp("^(\\[(.|"+e(u)+")*\\])("+e(u)+")*1.("+e(u)+"|.)*$","g"),o=l.replace(i,"$1");"["!==o[0]&&(o=""),B();var r=function(l,n){for(var t={},u=o.split(new RegExp(e("object"==typeof n&&"string"==typeof n.newline_char?n.newline_char:"\r?\n"))),i="",r="",s=0;s<u.length;s++)i=u[s].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),r=u[s].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),al(i).length>0&&(t[i]=r);return t}(0,n);for(var s in r)z([s,r[s]]);if("1"===r.SetUp&&!("FEN"in r&&Q(r.FEN)))return!1;var a=l.replace(o,"").replace(new RegExp(e(u),"g")," ");a=a.replace(/(\{[^}]+\})+?/g,"");for(var c=/(\([^\(\)]+\))+?/g;c.test(a);)a=a.replace(c,"");var h=al(a=(a=(a=a.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));h=h.join(",").replace(/,,+/g,",").split(",");for(var b="",f=0;f<h.length-1;f++){if(null==(b=el(h[f],t)))return!1;nl(b)}if(p.indexOf(b=h[h.length-1])>-1)(function(l){for(var n in l)return!0;return!1})(L)&&void 0===L.Result&&z(["Result",b]);else{if(null==(b=el(b,t)))return!1;nl(b)}return!0},header:function(){return z(arguments)},ascii:function(){return function(){for(var l="   +------------------------+\n",n=x.a8;n<=x.h1;n++){if(0===il(n)&&(l+=" "+"87654321"[ul(n)]+" |"),null==q[n])l+=" . ";else{var e=q[n].type;l+=" "+(q[n].color===t?e.toUpperCase():e.toLowerCase())+" "}n+1&136&&(l+="|\n",n+=8)}return(l+="   +------------------------+\n")+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return I},move:function(l,n){var t=null;if("string"==typeof l)t=el(l,void 0!==n&&"sloppy"in n&&n.sloppy);else if("object"==typeof l)for(var e=U(),u=0,i=e.length;u<i;u++)if(!(l.from!==ol(e[u].from)||l.to!==ol(e[u].to)||"promotion"in e[u]&&l.promotion!==e[u].promotion)){t=e[u];break}if(!t)return null;var o=sl(t);return nl(t),o},undo:function(){var l=tl();return l?sl(l):null},clear:function(){return T()},put:function(l,n){return K(l,n)},get:function(l){return F(l)},remove:function(l){return function(l){var n=F(l);return q[x[l]]=null,n&&n.type===a&&(M[n.color]=e),J(D()),n}(l)},perft:function(l){return function l(n){for(var t=U({legal:!1}),e=0,u=I,i=0,o=t.length;i<o;i++)nl(t[i]),H(u)||(n-1>0?e+=l(n-1):e++),tl();return e}(l)},square_color:function(l){if(l in x){var n=x[l];return(ul(n)+il(n))%2==0?"light":"dark"}return null},history:function(l){for(var n=[],t=[],e=(void 0!==l&&"verbose"in l&&l.verbose);A.length>0;)n.push(tl());for(;n.length>0;){var u=n.pop();t.push(e?sl(u):$(u)),nl(u)}return t}}};n.Chess=u,void 0===(e=(function(){return u}).call(n,t,n,l))||(l.exports=e)}}]);